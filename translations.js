const translations = {
  en: {
    // Header / Nav
    "nav_home": "Home",
    "nav_projects": "Projects",
    "nav_contributions": "Contributions",
    "nav_certifications": "Certifications",
    "title_passionate_developer": "A passionate 15 Year old developer from the UK",

    // Hero Section
    "hero_greeting": "Hello, I'm Derek",
    "hero_subtitle": "Crafting digital experiences with passion and precision",
    "hero_btn_about": "About Me",
    "hero_btn_view_projects": "View Projects",
    "hero_scroll_explore": "Scroll to explore",

    // About Section
    "about_title": "About Me",
    "about_intro_1": "Welcome to my digital space! I'm Derek Yuan, a passionate young developer with a love for creating innovative solutions and exploring cutting-edge technologies.",
    "about_intro_2": "At just 15 years old, I've already immersed myself in the world of software development, constantly learning and pushing the boundaries of what's possible.",
    "contact_heading": "Contact",
    "connect_heading": "Connect",
    "stack_overflow_link": "Stack Overflow",
    "github_link": "GitHub",

    // Skills Section
    "skills_title": "Technical Skills",
    "skills_subtitle": "Technologies I work with",

    // Stats Section
    "stats_title": "Journey in Numbers",
    "stats_years_old": "Years Old",
    "stats_projects": "Projects",
    "stats_commits": "Commits",
    "stats_certifications": "Certifications",

    // CTA Section
    "cta_title": "Ready to Collaborate?",
    "cta_subtitle": "Let's create something amazing together. I'm always open to discussing new opportunities and innovative projects.",
    "cta_btn_view_work": "View My Work",
    "cta_btn_get_in_touch": "Get In Touch",

    // Footer
    "footer_copyright": "Derek Yuan. All rights reserved.",

    // General
    "toggle_language_btn": "中文", // Button text to switch to Chinese

    // Projects Page
    "projects_page_title": "My Projects",
    "projects_page_subtitle": "Here are some of the key projects I've worked on throughout my career.",
    "projects_filter_all": "All",
    "projects_filter_python": "Python",
    "projects_filter_web": "Web Development",
    "projects_filter_mobile": "Mobile/Android",
    "projects_filter_game": "Game Development",
    "projects_filter_other": "Other Projects",
    "projects_search_placeholder": "Search...",
    "projects_no_results": "No projects found matching your search criteria.",
    // --- Project Specific ---
    "project_nn_title": "Neural Network from Scratch",
    "project_nn_tags": "Python, AI, Machine Learning",
    "project_nn_desc": "A custom neural network implementation built entirely from the ground up, using no external modules or dependencies. Includes a language model, image generation system, and a graphical user interface.",
    "project_pixelmaster_title": "PixelMasterX",
    "project_pixelmaster_tags": "Python, Tkinter, Image Processing",
    "project_pixelmaster_desc": "A versatile desktop application for file conversion and image manipulation built with Python and Tkinter.",
    "project_easygit_title": "EasyGit",
    "project_easygit_tags": "Python, GUI, Version Control",
    "project_easygit_desc": "A simplified version control system built in Python that provides local repository management without the complexity of merge conflicts. Features a user-friendly tkinter-based GUI.",
    "project_sortviz_title": "Sorting Algorithm Visualiser",
    "project_sortviz_tags": "TypeScript, Algorithms, Visualization",
    "project_sortviz_desc": "An interactive tool designed to help users understand and visualize various sorting algorithms in action. Perfect for students learning about algorithmic complexity and sorting techniques.",
    "project_quicknotzz_title": "QuickNotzz",
    "project_quicknotzz_tags": "Kotlin, Android, Note-taking",
    "project_quicknotzz_desc": "A user-friendly note-taking application developed in Kotlin. It allows users to create, edit, and organize notes seamlessly.",
    "project_dragonbot_title": "DragonBot-LiChessBot",
    "project_dragonbot_tags": "Python, Chess, AI",
    "project_dragonbot_desc": "A Lichess bot with over 10,000 opening book moves and an ELO of around 1960. Easily runnable from the python file and playable from Lichess with one-click challenge. Lichess Username: DRAGONTAMER-BOT",
    "project_chesstoolkit_title": "ChessToolkit",
    "project_chesstoolkit_tags": "Python, Chess Analysis",
    "project_chesstoolkit_desc": "A Chess Toolkit designed to help you improve at chess, with functions such as analyzing games using both custom and set engines locally and on the cloud.",
    "project_chesswebdigger_title": "Chess Username Finder",
    "project_chesswebdigger_tags": "JavaScript, Node.js, Express, Chess",
    "project_chesswebdigger_desc": "A web application that helps chess players find their online usernames across popular chess platforms like Chess.com and Lichess. Features include searching by player's full name, FIDE ID, federation, rating, birth year, with results displayed with confidence scores. Users can view game counts for found players and analyze opening repertoires with an interactive chess board.",
    "project_monkeytype_title": "MonkeyType (Fork)",
    "project_monkeytype_tags": "TypeScript, Web Development",
    "project_monkeytype_desc": "A customizable typing website with a minimalistic design and numerous features. Test yourself in various modes, track your progress and improve your typing speed.",
    "project_androidarch_title": "Android Architecture Samples (Fork)",
    "project_androidarch_tags": "Kotlin, Android",
    "project_androidarch_desc": "A collection of samples to discuss and showcase different architectural tools and patterns for Android apps. A useful reference for Android development best practices.",
    "project_kotlinlang_title": "Kotlin Programming Language (Fork)",
    "project_kotlinlang_tags": "Kotlin, Programming Language",
    "project_kotlinlang_desc": "The official Kotlin Programming Language repository. This fork allows me to explore the inner workings of Kotlin and contribute to its development.",
    "project_chesspairings_title": "ChessPairings",
    "project_chesspairings_tags": "JavaScript, Node.js, Python, Swiss System, Web App",
    "project_chesspairings_desc": "A web application for managing chess tournaments using the Swiss pairing system. Organizers can load player data from chess tournament websites, generate pairings, record results, and view standings with tiebreak scores (Buchholz, Sonneborn-Berger). Features include player data import, automatic pairings, result recording, and navigation between rounds. Built with Node.js, Express, Python (Beautiful Soup), and vanilla JS.",
    "project_btn_github": "GitHub",
    "project_btn_github_fork": "GitHub Fork",
    "project_btn_live_demo": "Live Demo",
    "project_btn_site": "Site",
  },
  zh: {
    // Header / Nav
    "nav_home": "首页",
    "nav_projects": "项目",
    "nav_contributions": "开源贡献",
    "nav_certifications": "证书",
    "title_passionate_developer": "一位来自英国的15岁热情开发者",

    // Hero Section
    "hero_greeting": "你好，我是 Derek",
    "hero_subtitle": "用热情与精准打造数字体验",
    "hero_btn_about": "关于我",
    "hero_btn_view_projects": "查看项目",
    "hero_scroll_explore": "下滑探索",

    // About Section
    "about_title": "关于我",
    "about_intro_1": "欢迎来到我的数字空间！我是 Derek Yuan，一名热爱创新解决方案和探索前沿技术的年轻开发者。",
    "about_intro_2": "年仅15岁，我已沉浸于软件开发世界，不断学习并突破可能的边界。",
    "contact_heading": "联系方式",
    "connect_heading": "社交链接",
    "stack_overflow_link": "Stack Overflow",
    "github_link": "GitHub",

    // Skills Section
    "skills_title": "技术技能",
    "skills_subtitle": "我掌握的技术",

    // Stats Section
    "stats_title": "数字见证成长",
    "stats_years_old": "年龄",
    "stats_projects": "项目",
    "stats_commits": "提交",
    "stats_certifications": "证书",

    // CTA Section
    "cta_title": "准备好合作了吗？",
    "cta_subtitle": "让我们一起创造精彩。我始终欢迎新机会和创新项目的讨论。",
    "cta_btn_view_work": "查看我的作品",
    "cta_btn_get_in_touch": "联系我",

    // Footer
    "footer_copyright": "Derek Yuan 版权所有。",

    // General
    "toggle_language_btn": "English", // 切换到英文

    // Projects Page
    "projects_page_title": "我的项目",
    "projects_page_subtitle": "以下是我职业生涯中参与的一些重要项目。",
    "projects_filter_all": "全部",
    "projects_filter_python": "Python",
    "projects_filter_web": "Web开发",
    "projects_filter_mobile": "移动/安卓",
    "projects_filter_game": "游戏开发",
    "projects_filter_other": "其他项目",
    "projects_search_placeholder": "搜索...",
    "projects_no_results": "未找到符合条件的项目。",
    // --- Project Specific ---
    "project_nn_title": "从零实现神经网络",
    "project_nn_tags": "Python, 人工智能, 机器学习",
    "project_nn_desc": "完全自主实现的神经网络，包括语言模型、图像生成系统和图形界面，无外部依赖。",
    "project_pixelmaster_title": "PixelMasterX",
    "project_pixelmaster_tags": "Python, Tkinter, 图像处理",
    "project_pixelmaster_desc": "基于Python和Tkinter的多功能桌面文件转换与图像处理应用。",
    "project_easygit_title": "EasyGit",
    "project_easygit_tags": "Python, GUI, 版本控制",
    "project_easygit_desc": "简化的本地版本控制系统，带有友好的tkinter图形界面，无合并冲突困扰。",
    "project_sortviz_title": "排序算法可视化",
    "project_sortviz_tags": "TypeScript, 算法, 可视化",
    "project_sortviz_desc": "交互式工具，帮助用户理解和可视化多种排序算法，适合学习算法复杂度。",
    "project_quicknotzz_title": "QuickNotzz",
    "project_quicknotzz_tags": "Kotlin, 安卓, 记事",
    "project_quicknotzz_desc": "用Kotlin开发的便捷记事应用，支持创建、编辑和组织笔记。",
    "project_dragonbot_title": "DragonBot-LiChessBot",
    "project_dragonbot_tags": "Python, 国际象棋, AI",
    "project_dragonbot_desc": "拥有超1万步开局库、ELO约1960的Lichess机器人，支持一键挑战。用户名：DRAGONTAMER-BOT",
    "project_chesstoolkit_title": "ChessToolkit",
    "project_chesstoolkit_tags": "Python, 象棋分析",
    "project_chesstoolkit_desc": "帮助提升象棋水平的工具包，支持本地和云端分析。",
    "project_chesswebdigger_title": "象棋用户名查找器",
    "project_chesswebdigger_tags": "JavaScript, Node.js, Express, 象棋",
    "project_chesswebdigger_desc": "帮助玩家在Chess.com和Lichess等平台查找用户名，支持多条件搜索和开局分析。",
    "project_monkeytype_title": "MonkeyType (分支)",
    "project_monkeytype_tags": "TypeScript, Web开发",
    "project_monkeytype_desc": "极简风格的打字网站，支持多种模式和进度追踪，提升打字速度。",
    "project_androidarch_title": "Android 架构示例 (分支)",
    "project_androidarch_tags": "Kotlin, 安卓",
    "project_androidarch_desc": "展示安卓应用架构工具和模式的示例集合，适合参考最佳实践。",
    "project_kotlinlang_title": "Kotlin 编程语言 (分支)",
    "project_kotlinlang_tags": "Kotlin, 编程语言",
    "project_kotlinlang_desc": "Kotlin官方仓库分支，用于探索和贡献Kotlin开发。",
    "project_chesspairings_title": "ChessPairings",
    "project_chesspairings_tags": "JavaScript, Node.js, Python, 瑞士制, Web应用",
    "project_chesspairings_desc": "基于瑞士制的象棋赛事管理Web应用，支持导入、配对、成绩录入和排名显示。",
    "project_btn_github": "GitHub",
    "project_btn_github_fork": "GitHub分支",
    "project_btn_live_demo": "在线演示",
    "project_btn_site": "网站",

    // Contributions Page
    "contributions_page_title": "我的开源贡献",
    "contributions_page_subtitle": "对各类项目和社区的开源贡献。",
    "contributions_category_os": "开源贡献",
    "contribution_android_arch_title": "Android 架构示例 - 测试重构",
    "contribution_android_arch_date": "2025年6月",
    "contribution_android_arch_desc": "重构了 Google 官方 Android 架构示例仓库中的 TasksTest.kt 文件，提高了代码可读性和可维护性。通过合并测试用例、简化辅助方法和去除冗余代码，使测试套件更易于理解和扩展。",
    "contribution_android_arch_pr_details": "PR #1040：重构 TasksTest.kt，提升可读性",
    "contribution_android_arch_reviewed_by": "评审人：Gemini Code Assist Bot",
    "contribution_android_arch_issue_desc_1": "本次重构包含以下关键改进：",
    "contribution_android_arch_issue_li_1": "测试用例合并：将相关测试用例合并为更简洁、可复用的测试，减少冗余，提高清晰度",
    "contribution_android_arch_issue_li_2": "辅助方法简化：简化辅助方法并引入新方法，提升可读性和代码复用性",
    "contribution_android_arch_issue_li_3": "样板代码减少：去除不必要的初始化和断言，聚焦核心功能",
    "contribution_android_arch_issue_li_4": "代码格式优化：合并注解和方法声明，使代码更紧凑易读",
    "contribution_android_arch_issue_desc_2": "这些更改让测试套件更易维护和扩展，同时保证了全面的测试覆盖。",
    "contribution_android_arch_metrics_lines": "更改行数：+24 −226",
    "contribution_android_arch_metrics_submitted": "提交时间：2025年6月",
    "contribution_android_arch_metrics_status": "状态：待审核",

    "contribution_monkeytype_quotes_title": "MonkeyType - 中文名言",
    "contribution_monkeytype_quotes_date": "2025年6月",
    "contribution_monkeytype_quotes_desc": "为 MonkeyType（知名打字练习网站）贡献了60条著名中文名言及其英文翻译，丰富了打字内容的文化多样性。",
    "contribution_monkeytype_quotes_pr_details": "PR #6620：新增60条著名中文名言",
    "contribution_monkeytype_quotes_merged_by": "合并人：Miodec（项目维护者）",
    "contribution_monkeytype_quotes_issue_desc_1": "新增60条著名中文名言，并附有精确英文翻译，内容涵盖传统价值观、人生智慧和文化见解。",
    "contribution_monkeytype_quotes_issue_desc_2": "示例名言：",
    "contribution_monkeytype_quotes_sample1": "千里之行，始于足下。",
    "contribution_monkeytype_quotes_sample2": "天行健，君子以自强不息。",
    "contribution_monkeytype_quotes_sample3": "读书百遍，其义自见。",
    "contribution_monkeytype_quotes_sample4": "知之者不如好之者。",
    "contribution_monkeytype_quotes_metrics_lines": "新增：+540行",
    "contribution_monkeytype_quotes_metrics_merged_date": "合并时间：2025年6月16日",
    "contribution_monkeytype_quotes_metrics_status": "状态：已合并",

    "contribution_monkeytype_cursor_title": "MonkeyType - 打字练习网站",
    "contribution_monkeytype_cursor_date": "2025年6月",
    "contribution_monkeytype_cursor_desc": "修复了块状光标在首次加载页面时错位的问题，提升了用户体验。",
    "contribution_monkeytype_cursor_issue_details": "Issue #6639：块状光标首次打开时错位",
    "contribution_monkeytype_cursor_reported_by": "报告人：gokulp01",
    "contribution_monkeytype_cursor_issue_desc": "首次在任意浏览器新标签页打开 MonkeyType 时，光标错位，刷新后恢复。现已修复。",
    "contribution_monkeytype_cursor_metrics_pr": "PR #6641",
    "contribution_monkeytype_cursor_metrics_fixed_date": "修复时间：2025年6月",
    "contribution_monkeytype_cursor_metrics_status": "状态：已合并",

    "contribution_youthacks_title": "Youthacks AHA - 新增SCSS并更新文档",
    "contribution_youthacks_date": "2025年6月",
    "contribution_youthacks_desc": "为 Youthacks AHA 项目引入模块化 SCSS 样式系统，完善文档并优化开发配置，提升了项目的可维护性和开发体验。",
    "contribution_youthacks_pr_details": "PR #12：新增SCSS并更新Readme",
    "contribution_youthacks_merged_by": "合并人：mattsoh（项目维护者）",
    "contribution_youthacks_issue_desc_1": "本次PR包含以下主要改进：",
    "contribution_youthacks_issue_li_1": "实现了模块化、响应式的SCSS样式系统",
    "contribution_youthacks_issue_li_2": "重构README，增加目录、安装说明和常见问题",
    "contribution_youthacks_issue_li_3": "新增IDE配置文件，优化IntelliJ开发体验",
    "contribution_youthacks_issue_li_4": "将SCSS分为基础、组件、页面和响应式四类",
    "contribution_youthacks_issue_li_5": "定义可复用变量和mixin，保证样式一致性",
    "contribution_youthacks_issue_desc_2": "这些更改提升了项目的可维护性、开发体验和文档质量。",
    "contribution_youthacks_metrics_lines": "更改行数：+1,804 −10",
    "contribution_youthacks_metrics_merged_date": "合并时间：2025年6月",
    "contribution_youthacks_metrics_status": "状态：已合并",

    // Certifications Page
    "certifications_page_title": "我的证书",
    "certifications_page_subtitle": "展示我持续学习之路的专业证书、课程和教育成就。",
    "certifications_stats_certs": "证书",
    "certifications_stats_platforms": "平台",
    "certifications_stats_hours": "学时",
    "certifications_filter_all": "全部",
    "certifications_filter_python": "Python",
    "certifications_filter_web": "Web开发",
    "certifications_filter_game": "游戏开发",
    "certifications_filter_microsoft": "微软",
    "certifications_filter_other": "其他",
    "cert_100days_title": "100天代码：Python全能训练营",
    "cert_100days_issuer": "Udemy",
    "cert_100days_tag1": "Python",
    "cert_100days_tag2": "全栈",
    "cert_100days_tag3": "100天",
    "cert_card_details_heading": "课程详情",
    "cert_100days_details_desc": "涵盖基础到高级主题的Python编程训练营，100天挑战与项目实践。",
    "cert_card_skills_heading": "掌握技能：",
    "cert_100days_skill1": "Python基础",
    "cert_100days_skill2": "Flask Web开发",
    "cert_100days_skill3": "数据科学与分析",
    "cert_100days_skill4": "GUI开发",
    "cert_100days_skill5": "API开发",
    "cert_card_btn_view_cert": "查看证书",
  }
};

// Function to set the language
function setLanguage(lang) {
  localStorage.setItem('language', lang);
  translatePage();
}

// Function to translate the page
function translatePage() {
  const lang = localStorage.getItem('language') || 'en'; // Default to English
  document.documentElement.lang = lang; // Set the lang attribute of the HTML element

  document.querySelectorAll('[data-translate-key]').forEach(element => {
    const key = element.getAttribute('data-translate-key');
    if (translations[lang] && translations[lang][key]) {
      // Handle elements that should have their text content replaced directly
      // This is good for titles, paragraphs, simple buttons, etc.
      // Check if the element is a button or a link that might contain an icon
      if ((element.tagName === 'BUTTON' || element.tagName === 'A') && element.querySelector('i')) {
        // If it's a button/link with an icon, find a child span to update, or update text node
        let textNode = null;
        let spanNode = element.querySelector('span[data-translate-key]'); // if span is tagged
        if (spanNode) {
            spanNode.textContent = translations[lang][key];
        } else { // Fallback to find the first text node that is not just whitespace
            for (let i = 0; i < element.childNodes.length; i++) {
                if (element.childNodes[i].nodeType === Node.TEXT_NODE && element.childNodes[i].textContent.trim().length > 0) {
                    textNode = element.childNodes[i];
                    break;
                }
            }
            if (textNode) {
                textNode.textContent = (element.querySelector('i') ? ' ' : '') + translations[lang][key];
            } else { // If no suitable text node, set the text content of the button/link itself (might overwrite icon if not handled carefully)
                 // Check if there's a span child we can update
                const childSpan = element.querySelector('span');
                if (childSpan && !childSpan.hasAttribute('data-translate-key')) { // don't re-translate already tagged span
                    childSpan.textContent = translations[lang][key];
                } else if (!childSpan) { // No span, set text content directly (less ideal for complex buttons)
                    // This case should be rare if HTML is structured with spans for text in buttons
                    let iconHTML = "";
                    const icon = element.querySelector('i');
                    if (icon) iconHTML = icon.outerHTML + " ";
                    element.innerHTML = iconHTML + translations[lang][key];
                }
            }
        }
      } else if (element.children.length > 0 && !element.classList.contains('social-link') && !element.classList.contains('project-tags')) {
        // If element has children and is not a special case, replace only the first significant text node
        let replaced = false;
        element.childNodes.forEach(child => {
          if (!replaced && child.nodeType === Node.TEXT_NODE && child.textContent.trim() !== "") {
            child.textContent = translations[lang][key];
            replaced = true;
          }
        });
        // If no text node was found and replaced (e.g. text is inside a child span not specifically targeted)
        // This is a fallback, ideally specific spans should be targeted with data-translate-key
        if (!replaced) {
            // Check if the key is for a simple text element and not something complex
            // Avoid accidentally clearing out complex HTML structure
            if (element.innerHTML.includes(translations['en'][key])) { // A heuristic
                 element.innerHTML = element.innerHTML.replace(translations['en'][key], translations[lang][key]);
            } else {
                 // As a last resort, if no specific text node found, but it's not a complex structure, set textContent
                 // This is risky for elements with mixed content; prefer data-translate-key on specific text spans
                 if(element.querySelectorAll('*').length === 0 || /^(P|H[1-6]|SPAN|DIV|LI)$/.test(element.tagName)){
                    element.textContent = translations[lang][key];
                 }
            }
        }
      }
      else {
        // Default: directly set textContent for simple elements
        element.textContent = translations[lang][key];
      }
    }
  });

  // Handle placeholder translations
  document.querySelectorAll('[data-translate-key-placeholder]').forEach(element => {
    const key = element.getAttribute('data-translate-key-placeholder');
    if (translations[lang] && translations[lang][key]) {
      element.placeholder = translations[lang][key];
    }
  });

  // The language toggle button's text is handled by the main loop
  // through its child span having data-translate-key="toggle_language_btn".
}

// Function to toggle language
function toggleLanguage() {
  const currentLang = localStorage.getItem('language') || 'en';
  const newLang = currentLang === 'en' ? 'zh' : 'en';
  setLanguage(newLang);
}

// Add event listener for language toggle after DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  // Set initial language
  translatePage(); // Translate page on load

  // Event listener for a toggle button (assuming one will be added with id 'language-toggle')
  const langToggleButton = document.getElementById('language-toggle');
  if (langToggleButton) {
    langToggleButton.addEventListener('click', toggleLanguage);
  }
});


